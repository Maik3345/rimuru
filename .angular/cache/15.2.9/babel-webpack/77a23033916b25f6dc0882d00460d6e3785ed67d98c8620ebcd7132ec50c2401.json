{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getComponentDecoratorMetadata = exports.getComponentPropsDecoratorMetadata = exports.isStandaloneComponent = exports.isComponent = exports.isDeclarable = exports.getComponentInputsOutputs = void 0;\nconst core_1 = require(\"@angular/core\");\nconst reflectionCapabilities = new core_1.ɵReflectionCapabilities();\n/**\n * Returns component Inputs / Outputs by browsing these properties and decorator\n */\nexports.getComponentInputsOutputs = component => {\n  const componentMetadata = exports.getComponentDecoratorMetadata(component);\n  const componentPropsMetadata = exports.getComponentPropsDecoratorMetadata(component);\n  const initialValue = {\n    inputs: [],\n    outputs: []\n  };\n  // Adds the I/O present in @Component metadata\n  if (componentMetadata && componentMetadata.inputs) {\n    initialValue.inputs.push(...componentMetadata.inputs.map(i => ({\n      propName: i,\n      templateName: i\n    })));\n  }\n  if (componentMetadata && componentMetadata.outputs) {\n    initialValue.outputs.push(...componentMetadata.outputs.map(i => ({\n      propName: i,\n      templateName: i\n    })));\n  }\n  if (!componentPropsMetadata) {\n    return initialValue;\n  }\n  // Browses component properties to extract I/O\n  // Filters properties that have the same name as the one present in the @Component property\n  return Object.entries(componentPropsMetadata).reduce((previousValue, [propertyName, values]) => {\n    var _a, _b;\n    const value = values.find(v => v instanceof core_1.Input || v instanceof core_1.Output);\n    if (value instanceof core_1.Input) {\n      const inputToAdd = {\n        propName: propertyName,\n        templateName: (_a = value.bindingPropertyName) !== null && _a !== void 0 ? _a : propertyName\n      };\n      const previousInputsFiltered = previousValue.inputs.filter(i => i.templateName !== propertyName);\n      return Object.assign(Object.assign({}, previousValue), {\n        inputs: [...previousInputsFiltered, inputToAdd]\n      });\n    }\n    if (value instanceof core_1.Output) {\n      const outputToAdd = {\n        propName: propertyName,\n        templateName: (_b = value.bindingPropertyName) !== null && _b !== void 0 ? _b : propertyName\n      };\n      const previousOutputsFiltered = previousValue.outputs.filter(i => i.templateName !== propertyName);\n      return Object.assign(Object.assign({}, previousValue), {\n        outputs: [...previousOutputsFiltered, outputToAdd]\n      });\n    }\n    return previousValue;\n  }, initialValue);\n};\nexports.isDeclarable = component => {\n  if (!component) {\n    return false;\n  }\n  const decorators = reflectionCapabilities.annotations(component);\n  return !!(decorators || []).find(d => d instanceof core_1.Directive || d instanceof core_1.Pipe || d instanceof core_1.Component);\n};\nexports.isComponent = component => {\n  if (!component) {\n    return false;\n  }\n  const decorators = reflectionCapabilities.annotations(component);\n  return (decorators || []).some(d => d instanceof core_1.Component);\n};\nexports.isStandaloneComponent = component => {\n  if (!component) {\n    return false;\n  }\n  const decorators = reflectionCapabilities.annotations(component);\n  // TODO: `standalone` is only available in Angular v14. Remove cast to `any` once\n  // Angular deps are updated to v14.x.x.\n  return (decorators || []).some(d => d instanceof core_1.Component && d.standalone);\n};\n/**\n * Returns all component decorator properties\n * is used to get all `@Input` and `@Output` Decorator\n */\nexports.getComponentPropsDecoratorMetadata = component => {\n  return reflectionCapabilities.propMetadata(component);\n};\n/**\n * Returns component decorator `@Component`\n */\nexports.getComponentDecoratorMetadata = component => {\n  const decorators = reflectionCapabilities.annotations(component);\n  return decorators.reverse().find(d => d instanceof core_1.Component);\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","getComponentDecoratorMetadata","getComponentPropsDecoratorMetadata","isStandaloneComponent","isComponent","isDeclarable","getComponentInputsOutputs","core_1","require","reflectionCapabilities","ɵReflectionCapabilities","component","componentMetadata","componentPropsMetadata","initialValue","inputs","outputs","push","map","i","propName","templateName","entries","reduce","previousValue","propertyName","values","_a","_b","find","v","Input","Output","inputToAdd","bindingPropertyName","previousInputsFiltered","filter","assign","outputToAdd","previousOutputsFiltered","decorators","annotations","d","Directive","Pipe","Component","some","standalone","propMetadata","reverse"],"sources":["/Users/michael.restrepo/code/personal/web-components/rimuru/node_modules/@storybook/angular/dist/ts3.9/client/preview/angular-beta/utils/NgComponentAnalyzer.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getComponentDecoratorMetadata = exports.getComponentPropsDecoratorMetadata = exports.isStandaloneComponent = exports.isComponent = exports.isDeclarable = exports.getComponentInputsOutputs = void 0;\nconst core_1 = require(\"@angular/core\");\nconst reflectionCapabilities = new core_1.ɵReflectionCapabilities();\n/**\n * Returns component Inputs / Outputs by browsing these properties and decorator\n */\nexports.getComponentInputsOutputs = (component) => {\n    const componentMetadata = exports.getComponentDecoratorMetadata(component);\n    const componentPropsMetadata = exports.getComponentPropsDecoratorMetadata(component);\n    const initialValue = {\n        inputs: [],\n        outputs: [],\n    };\n    // Adds the I/O present in @Component metadata\n    if (componentMetadata && componentMetadata.inputs) {\n        initialValue.inputs.push(...componentMetadata.inputs.map((i) => ({ propName: i, templateName: i })));\n    }\n    if (componentMetadata && componentMetadata.outputs) {\n        initialValue.outputs.push(...componentMetadata.outputs.map((i) => ({ propName: i, templateName: i })));\n    }\n    if (!componentPropsMetadata) {\n        return initialValue;\n    }\n    // Browses component properties to extract I/O\n    // Filters properties that have the same name as the one present in the @Component property\n    return Object.entries(componentPropsMetadata).reduce((previousValue, [propertyName, values]) => {\n        var _a, _b;\n        const value = values.find((v) => v instanceof core_1.Input || v instanceof core_1.Output);\n        if (value instanceof core_1.Input) {\n            const inputToAdd = {\n                propName: propertyName,\n                templateName: (_a = value.bindingPropertyName) !== null && _a !== void 0 ? _a : propertyName,\n            };\n            const previousInputsFiltered = previousValue.inputs.filter((i) => i.templateName !== propertyName);\n            return Object.assign(Object.assign({}, previousValue), { inputs: [...previousInputsFiltered, inputToAdd] });\n        }\n        if (value instanceof core_1.Output) {\n            const outputToAdd = {\n                propName: propertyName,\n                templateName: (_b = value.bindingPropertyName) !== null && _b !== void 0 ? _b : propertyName,\n            };\n            const previousOutputsFiltered = previousValue.outputs.filter((i) => i.templateName !== propertyName);\n            return Object.assign(Object.assign({}, previousValue), { outputs: [...previousOutputsFiltered, outputToAdd] });\n        }\n        return previousValue;\n    }, initialValue);\n};\nexports.isDeclarable = (component) => {\n    if (!component) {\n        return false;\n    }\n    const decorators = reflectionCapabilities.annotations(component);\n    return !!(decorators || []).find((d) => d instanceof core_1.Directive || d instanceof core_1.Pipe || d instanceof core_1.Component);\n};\nexports.isComponent = (component) => {\n    if (!component) {\n        return false;\n    }\n    const decorators = reflectionCapabilities.annotations(component);\n    return (decorators || []).some((d) => d instanceof core_1.Component);\n};\nexports.isStandaloneComponent = (component) => {\n    if (!component) {\n        return false;\n    }\n    const decorators = reflectionCapabilities.annotations(component);\n    // TODO: `standalone` is only available in Angular v14. Remove cast to `any` once\n    // Angular deps are updated to v14.x.x.\n    return (decorators || []).some((d) => d instanceof core_1.Component && d.standalone);\n};\n/**\n * Returns all component decorator properties\n * is used to get all `@Input` and `@Output` Decorator\n */\nexports.getComponentPropsDecoratorMetadata = (component) => {\n    return reflectionCapabilities.propMetadata(component);\n};\n/**\n * Returns component decorator `@Component`\n */\nexports.getComponentDecoratorMetadata = (component) => {\n    const decorators = reflectionCapabilities.annotations(component);\n    return decorators.reverse().find((d) => d instanceof core_1.Component);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}