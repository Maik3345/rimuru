{"ast":null,"code":"'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar $TypeError = require('es-errors/type');\nvar AsyncFromSyncIteratorContinuation = require('./AsyncFromSyncIteratorContinuation');\nvar Call = require('./Call');\nvar CreateIterResultObject = require('./CreateIterResultObject');\nvar Get = require('./Get');\nvar GetMethod = require('./GetMethod');\nvar IteratorNext = require('./IteratorNext');\nvar OrdinaryObjectCreate = require('./OrdinaryObjectCreate');\nvar Type = require('./Type');\nvar SLOT = require('internal-slot');\nvar isIteratorRecord = require('../helpers/records/iterator-record');\nvar $AsyncFromSyncIteratorPrototype = GetIntrinsic('%AsyncFromSyncIteratorPrototype%', true) || {\n  next: function next(value) {\n    var O = this; // step 1\n\n    SLOT.assert(O, '[[SyncIteratorRecord]]'); // step 2\n\n    var argsLength = arguments.length;\n    return new Promise(function (resolve) {\n      // step 3\n      var syncIteratorRecord = SLOT.get(O, '[[SyncIteratorRecord]]'); // step 4\n      var result;\n      if (argsLength > 0) {\n        result = IteratorNext(syncIteratorRecord, value); // step 5.a\n      } else {\n        // step 6\n        result = IteratorNext(syncIteratorRecord); // step 6.a\n      }\n      resolve(AsyncFromSyncIteratorContinuation(result)); // step 8\n    });\n  },\n  'return': function () {\n    var O = this; // step 1\n\n    SLOT.assert(O, '[[SyncIteratorRecord]]'); // step 2\n\n    var valueIsPresent = arguments.length > 0;\n    var value = valueIsPresent ? arguments[0] : void undefined;\n    return new Promise(function (resolve, reject) {\n      // step 3\n      var syncIterator = SLOT.get(O, '[[SyncIteratorRecord]]')['[[Iterator]]']; // step 4\n      var iteratorReturn = GetMethod(syncIterator, 'return'); // step 5\n\n      if (typeof iteratorReturn === 'undefined') {\n        // step 7\n        var iterResult = CreateIterResultObject(value, true); // step 7.a\n        Call(resolve, undefined, [iterResult]); // step 7.b\n        return;\n      }\n      var result;\n      if (valueIsPresent) {\n        // step 8\n        result = Call(iteratorReturn, syncIterator, [value]); // step 8.a\n      } else {\n        // step 9\n        result = Call(iteratorReturn, syncIterator); // step 9.a\n      }\n      if (Type(result) !== 'Object') {\n        // step 11\n        Call(reject, undefined, [new $TypeError('Iterator `return` method returned a non-object value.')]); // step 11.a\n        return;\n      }\n      resolve(AsyncFromSyncIteratorContinuation(result)); // step 12\n    });\n  },\n  'throw': function () {\n    var O = this; // step 1\n\n    SLOT.assert(O, '[[SyncIteratorRecord]]'); // step 2\n\n    var valueIsPresent = arguments.length > 0;\n    var value = valueIsPresent ? arguments[0] : void undefined;\n    return new Promise(function (resolve, reject) {\n      // step 3\n      var syncIterator = SLOT.get(O, '[[SyncIteratorRecord]]')['[[Iterator]]']; // step 4\n\n      var throwMethod = GetMethod(syncIterator, 'throw'); // step 5\n\n      if (typeof throwMethod === 'undefined') {\n        // step 7\n        Call(reject, undefined, [value]); // step 7.a\n        return;\n      }\n      var result;\n      if (valueIsPresent) {\n        // step 8\n        result = Call(throwMethod, syncIterator, [value]); // step 8.a\n      } else {\n        // step 9\n        result = Call(throwMethod, syncIterator); // step 9.a\n      }\n      if (Type(result) !== 'Object') {\n        // step 11\n        Call(reject, undefined, [new $TypeError('Iterator `throw` method returned a non-object value.')]); // step 11.a\n        return;\n      }\n      resolve(AsyncFromSyncIteratorContinuation(result /* , promiseCapability */)); // step 12\n    });\n  }\n};\n\n// https://262.ecma-international.org/14.0/#sec-createasyncfromsynciterator\n\nmodule.exports = function CreateAsyncFromSyncIterator(syncIteratorRecord) {\n  if (!isIteratorRecord(syncIteratorRecord)) {\n    throw new $TypeError('Assertion failed: `syncIteratorRecord` must be an Iterator Record');\n  }\n\n  // var asyncIterator = OrdinaryObjectCreate(%AsyncFromSyncIteratorPrototype%, « [[SyncIteratorRecord]] »); // step 1\n  var asyncIterator = OrdinaryObjectCreate($AsyncFromSyncIteratorPrototype);\n  SLOT.set(asyncIterator, '[[SyncIteratorRecord]]', syncIteratorRecord); // step 2\n\n  var nextMethod = Get(asyncIterator, 'next'); // step 3\n\n  return {\n    // steps 3-4\n    '[[Iterator]]': asyncIterator,\n    '[[NextMethod]]': nextMethod,\n    '[[Done]]': false\n  };\n};","map":{"version":3,"names":["GetIntrinsic","require","$TypeError","AsyncFromSyncIteratorContinuation","Call","CreateIterResultObject","Get","GetMethod","IteratorNext","OrdinaryObjectCreate","Type","SLOT","isIteratorRecord","$AsyncFromSyncIteratorPrototype","next","value","O","assert","argsLength","arguments","length","Promise","resolve","syncIteratorRecord","get","result","return","valueIsPresent","undefined","reject","syncIterator","iteratorReturn","iterResult","throw","throwMethod","module","exports","CreateAsyncFromSyncIterator","asyncIterator","set","nextMethod"],"sources":["/Users/michael.restrepo/code/personal/web-components/rimuru/node_modules/es-abstract/2023/CreateAsyncFromSyncIterator.js"],"sourcesContent":["'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $TypeError = require('es-errors/type');\n\nvar AsyncFromSyncIteratorContinuation = require('./AsyncFromSyncIteratorContinuation');\nvar Call = require('./Call');\nvar CreateIterResultObject = require('./CreateIterResultObject');\nvar Get = require('./Get');\nvar GetMethod = require('./GetMethod');\nvar IteratorNext = require('./IteratorNext');\nvar OrdinaryObjectCreate = require('./OrdinaryObjectCreate');\nvar Type = require('./Type');\n\nvar SLOT = require('internal-slot');\n\nvar isIteratorRecord = require('../helpers/records/iterator-record');\n\nvar $AsyncFromSyncIteratorPrototype = GetIntrinsic('%AsyncFromSyncIteratorPrototype%', true) || {\n\tnext: function next(value) {\n\t\tvar O = this; // step 1\n\n\t\tSLOT.assert(O, '[[SyncIteratorRecord]]'); // step 2\n\n\t\tvar argsLength = arguments.length;\n\n\t\treturn new Promise(function (resolve) { // step 3\n\t\t\tvar syncIteratorRecord = SLOT.get(O, '[[SyncIteratorRecord]]'); // step 4\n\t\t\tvar result;\n\t\t\tif (argsLength > 0) {\n\t\t\t\tresult = IteratorNext(syncIteratorRecord, value); // step 5.a\n\t\t\t} else { // step 6\n\t\t\t\tresult = IteratorNext(syncIteratorRecord);// step 6.a\n\t\t\t}\n\t\t\tresolve(AsyncFromSyncIteratorContinuation(result)); // step 8\n\t\t});\n\t},\n\t'return': function () {\n\t\tvar O = this; // step 1\n\n\t\tSLOT.assert(O, '[[SyncIteratorRecord]]'); // step 2\n\n\t\tvar valueIsPresent = arguments.length > 0;\n\t\tvar value = valueIsPresent ? arguments[0] : void undefined;\n\n\t\treturn new Promise(function (resolve, reject) { // step 3\n\t\t\tvar syncIterator = SLOT.get(O, '[[SyncIteratorRecord]]')['[[Iterator]]']; // step 4\n\t\t\tvar iteratorReturn = GetMethod(syncIterator, 'return'); // step 5\n\n\t\t\tif (typeof iteratorReturn === 'undefined') { // step 7\n\t\t\t\tvar iterResult = CreateIterResultObject(value, true); // step 7.a\n\t\t\t\tCall(resolve, undefined, [iterResult]); // step 7.b\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar result;\n\t\t\tif (valueIsPresent) { // step 8\n\t\t\t\tresult = Call(iteratorReturn, syncIterator, [value]); // step 8.a\n\t\t\t} else { // step 9\n\t\t\t\tresult = Call(iteratorReturn, syncIterator); // step 9.a\n\t\t\t}\n\t\t\tif (Type(result) !== 'Object') { // step 11\n\t\t\t\tCall(reject, undefined, [new $TypeError('Iterator `return` method returned a non-object value.')]); // step 11.a\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolve(AsyncFromSyncIteratorContinuation(result)); // step 12\n\t\t});\n\t},\n\t'throw': function () {\n\t\tvar O = this; // step 1\n\n\t\tSLOT.assert(O, '[[SyncIteratorRecord]]'); // step 2\n\n\t\tvar valueIsPresent = arguments.length > 0;\n\t\tvar value = valueIsPresent ? arguments[0] : void undefined;\n\n\t\treturn new Promise(function (resolve, reject) { // step 3\n\t\t\tvar syncIterator = SLOT.get(O, '[[SyncIteratorRecord]]')['[[Iterator]]']; // step 4\n\n\t\t\tvar throwMethod = GetMethod(syncIterator, 'throw'); // step 5\n\n\t\t\tif (typeof throwMethod === 'undefined') { // step 7\n\t\t\t\tCall(reject, undefined, [value]); // step 7.a\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar result;\n\t\t\tif (valueIsPresent) { // step 8\n\t\t\t\tresult = Call(throwMethod, syncIterator, [value]); // step 8.a\n\t\t\t} else { // step 9\n\t\t\t\tresult = Call(throwMethod, syncIterator); // step 9.a\n\t\t\t}\n\t\t\tif (Type(result) !== 'Object') { // step 11\n\t\t\t\tCall(reject, undefined, [new $TypeError('Iterator `throw` method returned a non-object value.')]); // step 11.a\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolve(AsyncFromSyncIteratorContinuation(result/* , promiseCapability */)); // step 12\n\t\t});\n\t}\n};\n\n// https://262.ecma-international.org/14.0/#sec-createasyncfromsynciterator\n\nmodule.exports = function CreateAsyncFromSyncIterator(syncIteratorRecord) {\n\tif (!isIteratorRecord(syncIteratorRecord)) {\n\t\tthrow new $TypeError('Assertion failed: `syncIteratorRecord` must be an Iterator Record');\n\t}\n\n\t// var asyncIterator = OrdinaryObjectCreate(%AsyncFromSyncIteratorPrototype%, « [[SyncIteratorRecord]] »); // step 1\n\tvar asyncIterator = OrdinaryObjectCreate($AsyncFromSyncIteratorPrototype);\n\n\tSLOT.set(asyncIterator, '[[SyncIteratorRecord]]', syncIteratorRecord); // step 2\n\n\tvar nextMethod = Get(asyncIterator, 'next'); // step 3\n\n\treturn { // steps 3-4\n\t\t'[[Iterator]]': asyncIterator,\n\t\t'[[NextMethod]]': nextMethod,\n\t\t'[[Done]]': false\n\t};\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}