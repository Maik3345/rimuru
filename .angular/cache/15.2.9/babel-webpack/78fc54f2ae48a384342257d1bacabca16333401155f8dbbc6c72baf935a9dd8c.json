{"ast":null,"code":"/* eslint-env browser */\nimport { useEffect } from '@storybook/addons';\nimport { drawSelectedElement } from './box-model/visualizer';\nimport { init, rescale, destroy } from './box-model/canvas';\nimport { deepElementFromPoint } from './util';\nvar nodeAtPointerRef;\nvar pointer = {\n  x: 0,\n  y: 0\n};\nfunction findAndDrawElement(x, y) {\n  nodeAtPointerRef = deepElementFromPoint(x, y);\n  drawSelectedElement(nodeAtPointerRef);\n}\nexport var withMeasure = function withMeasure(StoryFn, context) {\n  var measureEnabled = context.globals.measureEnabled;\n  useEffect(function () {\n    var onMouseMove = function onMouseMove(event) {\n      window.requestAnimationFrame(function () {\n        event.stopPropagation();\n        pointer.x = event.clientX;\n        pointer.y = event.clientY;\n      });\n    };\n    document.addEventListener('mousemove', onMouseMove);\n    return function () {\n      document.removeEventListener('mousemove', onMouseMove);\n    };\n  }, []);\n  useEffect(function () {\n    var onMouseOver = function onMouseOver(event) {\n      window.requestAnimationFrame(function () {\n        event.stopPropagation();\n        findAndDrawElement(event.clientX, event.clientY);\n      });\n    };\n    var onResize = function onResize() {\n      window.requestAnimationFrame(function () {\n        rescale();\n      });\n    };\n    if (measureEnabled) {\n      document.addEventListener('mouseover', onMouseOver);\n      init();\n      window.addEventListener('resize', onResize); // Draw the element below the pointer when first enabled\n\n      findAndDrawElement(pointer.x, pointer.y);\n    }\n    return function () {\n      window.removeEventListener('resize', onResize);\n      destroy();\n    };\n  }, [measureEnabled]);\n  return StoryFn();\n};","map":{"version":3,"names":["useEffect","drawSelectedElement","init","rescale","destroy","deepElementFromPoint","nodeAtPointerRef","pointer","x","y","findAndDrawElement","withMeasure","StoryFn","context","measureEnabled","globals","onMouseMove","event","window","requestAnimationFrame","stopPropagation","clientX","clientY","document","addEventListener","removeEventListener","onMouseOver","onResize"],"sources":["/Users/michael.restrepo/code/personal/web-components/rimuru/node_modules/@storybook/addon-measure/dist/esm/withMeasure.js"],"sourcesContent":["/* eslint-env browser */\nimport { useEffect } from '@storybook/addons';\nimport { drawSelectedElement } from './box-model/visualizer';\nimport { init, rescale, destroy } from './box-model/canvas';\nimport { deepElementFromPoint } from './util';\nvar nodeAtPointerRef;\nvar pointer = {\n  x: 0,\n  y: 0\n};\n\nfunction findAndDrawElement(x, y) {\n  nodeAtPointerRef = deepElementFromPoint(x, y);\n  drawSelectedElement(nodeAtPointerRef);\n}\n\nexport var withMeasure = function withMeasure(StoryFn, context) {\n  var measureEnabled = context.globals.measureEnabled;\n  useEffect(function () {\n    var onMouseMove = function onMouseMove(event) {\n      window.requestAnimationFrame(function () {\n        event.stopPropagation();\n        pointer.x = event.clientX;\n        pointer.y = event.clientY;\n      });\n    };\n\n    document.addEventListener('mousemove', onMouseMove);\n    return function () {\n      document.removeEventListener('mousemove', onMouseMove);\n    };\n  }, []);\n  useEffect(function () {\n    var onMouseOver = function onMouseOver(event) {\n      window.requestAnimationFrame(function () {\n        event.stopPropagation();\n        findAndDrawElement(event.clientX, event.clientY);\n      });\n    };\n\n    var onResize = function onResize() {\n      window.requestAnimationFrame(function () {\n        rescale();\n      });\n    };\n\n    if (measureEnabled) {\n      document.addEventListener('mouseover', onMouseOver);\n      init();\n      window.addEventListener('resize', onResize); // Draw the element below the pointer when first enabled\n\n      findAndDrawElement(pointer.x, pointer.y);\n    }\n\n    return function () {\n      window.removeEventListener('resize', onResize);\n      destroy();\n    };\n  }, [measureEnabled]);\n  return StoryFn();\n};"],"mappings":"AAAA;AACA,SAASA,SAAS,QAAQ,mBAAmB;AAC7C,SAASC,mBAAmB,QAAQ,wBAAwB;AAC5D,SAASC,IAAI,EAAEC,OAAO,EAAEC,OAAO,QAAQ,oBAAoB;AAC3D,SAASC,oBAAoB,QAAQ,QAAQ;AAC7C,IAAIC,gBAAgB;AACpB,IAAIC,OAAO,GAAG;EACZC,CAAC,EAAE,CAAC;EACJC,CAAC,EAAE;AACL,CAAC;AAED,SAASC,kBAAkBA,CAACF,CAAC,EAAEC,CAAC,EAAE;EAChCH,gBAAgB,GAAGD,oBAAoB,CAACG,CAAC,EAAEC,CAAC,CAAC;EAC7CR,mBAAmB,CAACK,gBAAgB,CAAC;AACvC;AAEA,OAAO,IAAIK,WAAW,GAAG,SAASA,WAAWA,CAACC,OAAO,EAAEC,OAAO,EAAE;EAC9D,IAAIC,cAAc,GAAGD,OAAO,CAACE,OAAO,CAACD,cAAc;EACnDd,SAAS,CAAC,YAAY;IACpB,IAAIgB,WAAW,GAAG,SAASA,WAAWA,CAACC,KAAK,EAAE;MAC5CC,MAAM,CAACC,qBAAqB,CAAC,YAAY;QACvCF,KAAK,CAACG,eAAe,CAAC,CAAC;QACvBb,OAAO,CAACC,CAAC,GAAGS,KAAK,CAACI,OAAO;QACzBd,OAAO,CAACE,CAAC,GAAGQ,KAAK,CAACK,OAAO;MAC3B,CAAC,CAAC;IACJ,CAAC;IAEDC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAER,WAAW,CAAC;IACnD,OAAO,YAAY;MACjBO,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAET,WAAW,CAAC;IACxD,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACNhB,SAAS,CAAC,YAAY;IACpB,IAAI0B,WAAW,GAAG,SAASA,WAAWA,CAACT,KAAK,EAAE;MAC5CC,MAAM,CAACC,qBAAqB,CAAC,YAAY;QACvCF,KAAK,CAACG,eAAe,CAAC,CAAC;QACvBV,kBAAkB,CAACO,KAAK,CAACI,OAAO,EAAEJ,KAAK,CAACK,OAAO,CAAC;MAClD,CAAC,CAAC;IACJ,CAAC;IAED,IAAIK,QAAQ,GAAG,SAASA,QAAQA,CAAA,EAAG;MACjCT,MAAM,CAACC,qBAAqB,CAAC,YAAY;QACvChB,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ,CAAC;IAED,IAAIW,cAAc,EAAE;MAClBS,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEE,WAAW,CAAC;MACnDxB,IAAI,CAAC,CAAC;MACNgB,MAAM,CAACM,gBAAgB,CAAC,QAAQ,EAAEG,QAAQ,CAAC,CAAC,CAAC;;MAE7CjB,kBAAkB,CAACH,OAAO,CAACC,CAAC,EAAED,OAAO,CAACE,CAAC,CAAC;IAC1C;IAEA,OAAO,YAAY;MACjBS,MAAM,CAACO,mBAAmB,CAAC,QAAQ,EAAEE,QAAQ,CAAC;MAC9CvB,OAAO,CAAC,CAAC;IACX,CAAC;EACH,CAAC,EAAE,CAACU,cAAc,CAAC,CAAC;EACpB,OAAOF,OAAO,CAAC,CAAC;AAClB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}