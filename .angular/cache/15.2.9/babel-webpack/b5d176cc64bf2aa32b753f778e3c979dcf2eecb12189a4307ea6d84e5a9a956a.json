{"ast":null,"code":"import _regeneratorRuntime from \"/Users/michael.restrepo/code/personal/web-components/rimuru/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/regenerator/index.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"regenerator-runtime/runtime.js\";\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nimport global from 'global';\nimport { STORY_RENDER_PHASE_CHANGED, STORY_RENDERED } from '@storybook/core-events';\nvar AbortController = global.AbortController;\nfunction createController() {\n  if (AbortController) return new AbortController(); // Polyfill for IE11\n\n  return {\n    signal: {\n      aborted: false\n    },\n    abort: function abort() {\n      this.signal.aborted = true;\n    }\n  };\n}\nexport var PREPARE_ABORTED = new Error('prepareAborted');\nexport var StoryRender = /*#__PURE__*/function () {\n  function StoryRender(channel, store, renderToScreen, callbacks, id, viewMode, story) {\n    _classCallCheck(this, StoryRender);\n    this.channel = channel;\n    this.store = store;\n    this.renderToScreen = renderToScreen;\n    this.callbacks = callbacks;\n    this.id = id;\n    this.viewMode = viewMode;\n    this.story = void 0;\n    this.phase = void 0;\n    this.abortController = void 0;\n    this.canvasElement = void 0;\n    this.notYetRendered = true;\n    this.disableKeyListeners = false;\n    this.abortController = createController(); // Allow short-circuiting preparing if we happen to already\n    // have the story (this is used by docs mode)\n\n    if (story) {\n      this.story = story; // TODO -- what should the phase be now?\n      // TODO -- should we emit the render phase changed event?\n\n      this.phase = 'preparing';\n    }\n  }\n  _createClass(StoryRender, [{\n    key: \"runPhase\",\n    value: function () {\n      var _runPhase = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(signal, phase, phaseFn) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.phase = phase;\n                this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                  newPhase: this.phase,\n                  storyId: this.id\n                });\n                if (!phaseFn) {\n                  _context.next = 5;\n                  break;\n                }\n                _context.next = 5;\n                return phaseFn();\n              case 5:\n                if (signal.aborted) {\n                  this.phase = 'aborted';\n                  this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                    newPhase: this.phase,\n                    storyId: this.id\n                  });\n                }\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function runPhase(_x, _x2, _x3) {\n        return _runPhase.apply(this, arguments);\n      }\n      return runPhase;\n    }()\n  }, {\n    key: \"prepare\",\n    value: function () {\n      var _prepare = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _this = this;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.runPhase(this.abortController.signal, 'preparing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return _this.store.loadStory({\n                            storyId: _this.id\n                          });\n                        case 2:\n                          _this.story = _context2.sent;\n                        case 3:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                })));\n              case 2:\n                if (!this.abortController.signal.aborted) {\n                  _context3.next = 5;\n                  break;\n                }\n                this.store.cleanupStory(this.story);\n                throw PREPARE_ABORTED;\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function prepare() {\n        return _prepare.apply(this, arguments);\n      }\n      return prepare;\n    }() // The two story \"renders\" are equal and have both loaded the same story\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(other) {\n      return other && this.id === other.id && this.story && this.story === other.story;\n    }\n  }, {\n    key: \"isPreparing\",\n    value: function isPreparing() {\n      return ['preparing'].includes(this.phase);\n    }\n  }, {\n    key: \"isPending\",\n    value: function isPending() {\n      return ['rendering', 'playing'].includes(this.phase);\n    }\n  }, {\n    key: \"context\",\n    value: function context() {\n      return this.store.getStoryContext(this.story);\n    }\n  }, {\n    key: \"renderToElement\",\n    value: function () {\n      var _renderToElement = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(canvasElement) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.canvasElement = canvasElement; // FIXME: this comment\n                // Start the first (initial) render. We don't await here because we need to return the \"cleanup\"\n                // function below right away, so if the user changes story during the first render we can cancel\n                // it without having to first wait for it to finish.\n                // Whenever the selection changes we want to force the component to be remounted.\n\n                return _context4.abrupt(\"return\", this.render({\n                  initial: true,\n                  forceRemount: true\n                }));\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n      function renderToElement(_x4) {\n        return _renderToElement.apply(this, arguments);\n      }\n      return renderToElement;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n        var _this2 = this;\n        var _ref2,\n          _ref2$initial,\n          initial,\n          _ref2$forceRemount,\n          forceRemount,\n          _this$story,\n          id,\n          componentId,\n          title,\n          name,\n          applyLoaders,\n          unboundStoryFn,\n          playFunction,\n          abortSignal,\n          loadedContext,\n          renderStoryContext,\n          _renderContext,\n          _args9 = arguments;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _ref2 = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : {}, _ref2$initial = _ref2.initial, initial = _ref2$initial === void 0 ? false : _ref2$initial, _ref2$forceRemount = _ref2.forceRemount, forceRemount = _ref2$forceRemount === void 0 ? false : _ref2$forceRemount;\n                if (this.story) {\n                  _context9.next = 3;\n                  break;\n                }\n                throw new Error('cannot render when not prepared');\n              case 3:\n                _this$story = this.story, id = _this$story.id, componentId = _this$story.componentId, title = _this$story.title, name = _this$story.name, applyLoaders = _this$story.applyLoaders, unboundStoryFn = _this$story.unboundStoryFn, playFunction = _this$story.playFunction;\n                if (forceRemount && !initial) {\n                  // NOTE: we don't check the cancel actually worked here, so the previous\n                  // render could conceivably still be running after this call.\n                  // We might want to change that in the future.\n                  this.cancelRender();\n                  this.abortController = createController();\n                } // We need a stable reference to the signal -- if a re-mount happens the\n                // abort controller may be torn down (above) before we actually check the signal.\n\n                abortSignal = this.abortController.signal;\n                _context9.prev = 6;\n                _context9.next = 9;\n                return this.runPhase(abortSignal, 'loading', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n                  return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                    while (1) {\n                      switch (_context5.prev = _context5.next) {\n                        case 0:\n                          _context5.next = 2;\n                          return applyLoaders(Object.assign({}, _this2.context(), {\n                            viewMode: _this2.viewMode\n                          }));\n                        case 2:\n                          loadedContext = _context5.sent;\n                        case 3:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                  }, _callee5);\n                })));\n              case 9:\n                if (!abortSignal.aborted) {\n                  _context9.next = 11;\n                  break;\n                }\n                return _context9.abrupt(\"return\");\n              case 11:\n                renderStoryContext = Object.assign({}, loadedContext, this.context(), {\n                  abortSignal: abortSignal,\n                  canvasElement: this.canvasElement\n                });\n                _renderContext = Object.assign({\n                  componentId: componentId,\n                  title: title,\n                  kind: title,\n                  id: id,\n                  name: name,\n                  story: name\n                }, this.callbacks, {\n                  forceRemount: forceRemount || this.notYetRendered,\n                  storyContext: renderStoryContext,\n                  storyFn: function storyFn() {\n                    return unboundStoryFn(renderStoryContext);\n                  },\n                  unboundStoryFn: unboundStoryFn\n                });\n                _context9.next = 15;\n                return this.runPhase(abortSignal, 'rendering', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n                  return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          return _context6.abrupt(\"return\", _this2.renderToScreen(_renderContext, _this2.canvasElement));\n                        case 1:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                })));\n              case 15:\n                this.notYetRendered = false;\n                if (!abortSignal.aborted) {\n                  _context9.next = 18;\n                  break;\n                }\n                return _context9.abrupt(\"return\");\n              case 18:\n                if (!(forceRemount && playFunction)) {\n                  _context9.next = 27;\n                  break;\n                }\n                this.disableKeyListeners = true;\n                _context9.next = 22;\n                return this.runPhase(abortSignal, 'playing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n                  return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          return _context7.abrupt(\"return\", playFunction(_renderContext.storyContext));\n                        case 1:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7);\n                })));\n              case 22:\n                _context9.next = 24;\n                return this.runPhase(abortSignal, 'played');\n              case 24:\n                this.disableKeyListeners = false;\n                if (!abortSignal.aborted) {\n                  _context9.next = 27;\n                  break;\n                }\n                return _context9.abrupt(\"return\");\n              case 27:\n                _context9.next = 29;\n                return this.runPhase(abortSignal, 'completed', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n                  return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          return _context8.abrupt(\"return\", _this2.channel.emit(STORY_RENDERED, id));\n                        case 1:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                })));\n              case 29:\n                _context9.next = 34;\n                break;\n              case 31:\n                _context9.prev = 31;\n                _context9.t0 = _context9[\"catch\"](6);\n                this.callbacks.showException(_context9.t0);\n              case 34:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[6, 31]]);\n      }));\n      function render() {\n        return _render.apply(this, arguments);\n      }\n      return render;\n    }()\n  }, {\n    key: \"rerender\",\n    value: function () {\n      var _rerender = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                return _context10.abrupt(\"return\", this.render());\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n      function rerender() {\n        return _rerender.apply(this, arguments);\n      }\n      return rerender;\n    }()\n  }, {\n    key: \"remount\",\n    value: function () {\n      var _remount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                return _context11.abrupt(\"return\", this.render({\n                  forceRemount: true\n                }));\n              case 1:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n      function remount() {\n        return _remount.apply(this, arguments);\n      }\n      return remount;\n    }() // If the story is torn down (either a new story is rendered or the docs page removes it)\n    // we need to consider the fact that the initial render may not be finished\n    // (possibly the loaders or the play function are still running). We use the controller\n    // as a method to abort them, ASAP, but this is not foolproof as we cannot control what\n    // happens inside the user's code.\n  }, {\n    key: \"cancelRender\",\n    value: function cancelRender() {\n      this.abortController.abort();\n    }\n  }, {\n    key: \"teardown\",\n    value: function () {\n      var _teardown = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n        var options,\n          i,\n          _args12 = arguments;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                options = _args12.length > 0 && _args12[0] !== undefined ? _args12[0] : {};\n                this.cancelRender(); // If the story has loaded, we need to cleanup\n\n                if (this.story) this.store.cleanupStory(this.story); // Check if we're done rendering/playing. If not, we may have to reload the page.\n                // Wait several ticks that may be needed to handle the abort, then try again.\n                // Note that there's a max of 5 nested timeouts before they're no longer \"instant\".\n\n                i = 0;\n              case 4:\n                if (!(i < 3)) {\n                  _context12.next = 12;\n                  break;\n                }\n                if (this.isPending()) {\n                  _context12.next = 7;\n                  break;\n                }\n                return _context12.abrupt(\"return\");\n              case 7:\n                _context12.next = 9;\n                return new Promise(function (resolve) {\n                  return setTimeout(resolve, 0);\n                });\n              case 9:\n                i += 1;\n                _context12.next = 4;\n                break;\n              case 12:\n                // If we still haven't completed, reload the page (iframe) to ensure we have a clean slate\n                // for the next render. Since the reload can take a brief moment to happen, we want to stop\n                // further rendering by awaiting a never-resolving promise (which is destroyed on reload).\n                global.window.location.reload();\n                _context12.next = 15;\n                return new Promise(function () {});\n              case 15:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n      function teardown() {\n        return _teardown.apply(this, arguments);\n      }\n      return teardown;\n    }()\n  }]);\n  return StoryRender;\n}();\nStoryRender.displayName = \"StoryRender\";","map":{"version":3,"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","global","STORY_RENDER_PHASE_CHANGED","STORY_RENDERED","AbortController","createController","signal","aborted","abort","PREPARE_ABORTED","Error","StoryRender","channel","store","renderToScreen","callbacks","id","viewMode","story","phase","abortController","canvasElement","notYetRendered","disableKeyListeners","_runPhase","_regeneratorRuntime","mark","_callee","phaseFn","wrap","_callee$","_context","prev","next","emit","newPhase","storyId","stop","runPhase","_x","_x2","_x3","_prepare","_callee3","_this","_callee3$","_context3","_callee2","_callee2$","_context2","loadStory","sent","cleanupStory","prepare","isEqual","other","isPreparing","includes","isPending","context","getStoryContext","_renderToElement","_callee4","_callee4$","_context4","abrupt","render","initial","forceRemount","renderToElement","_x4","_render","_callee9","_this2","_ref2","_ref2$initial","_ref2$forceRemount","_this$story","componentId","title","name","applyLoaders","unboundStoryFn","playFunction","abortSignal","loadedContext","renderStoryContext","_renderContext","_args9","_callee9$","_context9","cancelRender","_callee5","_callee5$","_context5","assign","kind","storyContext","storyFn","_callee6","_callee6$","_context6","_callee7","_callee7$","_context7","_callee8","_callee8$","_context8","t0","showException","_rerender","_callee10","_callee10$","_context10","rerender","_remount","_callee11","_callee11$","_context11","remount","_teardown","_callee12","options","_args12","_callee12$","_context12","setTimeout","window","location","reload","teardown","displayName"],"sources":["/Users/michael.restrepo/code/personal/web-components/rimuru/node_modules/@storybook/preview-web/dist/esm/StoryRender.js"],"sourcesContent":["import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport { STORY_RENDER_PHASE_CHANGED, STORY_RENDERED } from '@storybook/core-events';\nvar AbortController = global.AbortController;\n\nfunction createController() {\n  if (AbortController) return new AbortController(); // Polyfill for IE11\n\n  return {\n    signal: {\n      aborted: false\n    },\n    abort: function abort() {\n      this.signal.aborted = true;\n    }\n  };\n}\n\nexport var PREPARE_ABORTED = new Error('prepareAborted');\nexport var StoryRender = /*#__PURE__*/function () {\n  function StoryRender(channel, store, renderToScreen, callbacks, id, viewMode, story) {\n    _classCallCheck(this, StoryRender);\n\n    this.channel = channel;\n    this.store = store;\n    this.renderToScreen = renderToScreen;\n    this.callbacks = callbacks;\n    this.id = id;\n    this.viewMode = viewMode;\n    this.story = void 0;\n    this.phase = void 0;\n    this.abortController = void 0;\n    this.canvasElement = void 0;\n    this.notYetRendered = true;\n    this.disableKeyListeners = false;\n    this.abortController = createController(); // Allow short-circuiting preparing if we happen to already\n    // have the story (this is used by docs mode)\n\n    if (story) {\n      this.story = story; // TODO -- what should the phase be now?\n      // TODO -- should we emit the render phase changed event?\n\n      this.phase = 'preparing';\n    }\n  }\n\n  _createClass(StoryRender, [{\n    key: \"runPhase\",\n    value: function () {\n      var _runPhase = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(signal, phase, phaseFn) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.phase = phase;\n                this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                  newPhase: this.phase,\n                  storyId: this.id\n                });\n\n                if (!phaseFn) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 5;\n                return phaseFn();\n\n              case 5:\n                if (signal.aborted) {\n                  this.phase = 'aborted';\n                  this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                    newPhase: this.phase,\n                    storyId: this.id\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function runPhase(_x, _x2, _x3) {\n        return _runPhase.apply(this, arguments);\n      }\n\n      return runPhase;\n    }()\n  }, {\n    key: \"prepare\",\n    value: function () {\n      var _prepare = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.runPhase(this.abortController.signal, 'preparing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n                  return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return _this.store.loadStory({\n                            storyId: _this.id\n                          });\n\n                        case 2:\n                          _this.story = _context2.sent;\n\n                        case 3:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                })));\n\n              case 2:\n                if (!this.abortController.signal.aborted) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                this.store.cleanupStory(this.story);\n                throw PREPARE_ABORTED;\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function prepare() {\n        return _prepare.apply(this, arguments);\n      }\n\n      return prepare;\n    }() // The two story \"renders\" are equal and have both loaded the same story\n\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(other) {\n      return other && this.id === other.id && this.story && this.story === other.story;\n    }\n  }, {\n    key: \"isPreparing\",\n    value: function isPreparing() {\n      return ['preparing'].includes(this.phase);\n    }\n  }, {\n    key: \"isPending\",\n    value: function isPending() {\n      return ['rendering', 'playing'].includes(this.phase);\n    }\n  }, {\n    key: \"context\",\n    value: function context() {\n      return this.store.getStoryContext(this.story);\n    }\n  }, {\n    key: \"renderToElement\",\n    value: function () {\n      var _renderToElement = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(canvasElement) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.canvasElement = canvasElement; // FIXME: this comment\n                // Start the first (initial) render. We don't await here because we need to return the \"cleanup\"\n                // function below right away, so if the user changes story during the first render we can cancel\n                // it without having to first wait for it to finish.\n                // Whenever the selection changes we want to force the component to be remounted.\n\n                return _context4.abrupt(\"return\", this.render({\n                  initial: true,\n                  forceRemount: true\n                }));\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function renderToElement(_x4) {\n        return _renderToElement.apply(this, arguments);\n      }\n\n      return renderToElement;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {\n        var _this2 = this;\n\n        var _ref2,\n            _ref2$initial,\n            initial,\n            _ref2$forceRemount,\n            forceRemount,\n            _this$story,\n            id,\n            componentId,\n            title,\n            name,\n            applyLoaders,\n            unboundStoryFn,\n            playFunction,\n            abortSignal,\n            loadedContext,\n            renderStoryContext,\n            _renderContext,\n            _args9 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _ref2 = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : {}, _ref2$initial = _ref2.initial, initial = _ref2$initial === void 0 ? false : _ref2$initial, _ref2$forceRemount = _ref2.forceRemount, forceRemount = _ref2$forceRemount === void 0 ? false : _ref2$forceRemount;\n\n                if (this.story) {\n                  _context9.next = 3;\n                  break;\n                }\n\n                throw new Error('cannot render when not prepared');\n\n              case 3:\n                _this$story = this.story, id = _this$story.id, componentId = _this$story.componentId, title = _this$story.title, name = _this$story.name, applyLoaders = _this$story.applyLoaders, unboundStoryFn = _this$story.unboundStoryFn, playFunction = _this$story.playFunction;\n\n                if (forceRemount && !initial) {\n                  // NOTE: we don't check the cancel actually worked here, so the previous\n                  // render could conceivably still be running after this call.\n                  // We might want to change that in the future.\n                  this.cancelRender();\n                  this.abortController = createController();\n                } // We need a stable reference to the signal -- if a re-mount happens the\n                // abort controller may be torn down (above) before we actually check the signal.\n\n\n                abortSignal = this.abortController.signal;\n                _context9.prev = 6;\n                _context9.next = 9;\n                return this.runPhase(abortSignal, 'loading', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n                  return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                    while (1) {\n                      switch (_context5.prev = _context5.next) {\n                        case 0:\n                          _context5.next = 2;\n                          return applyLoaders(Object.assign({}, _this2.context(), {\n                            viewMode: _this2.viewMode\n                          }));\n\n                        case 2:\n                          loadedContext = _context5.sent;\n\n                        case 3:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                  }, _callee5);\n                })));\n\n              case 9:\n                if (!abortSignal.aborted) {\n                  _context9.next = 11;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 11:\n                renderStoryContext = Object.assign({}, loadedContext, this.context(), {\n                  abortSignal: abortSignal,\n                  canvasElement: this.canvasElement\n                });\n                _renderContext = Object.assign({\n                  componentId: componentId,\n                  title: title,\n                  kind: title,\n                  id: id,\n                  name: name,\n                  story: name\n                }, this.callbacks, {\n                  forceRemount: forceRemount || this.notYetRendered,\n                  storyContext: renderStoryContext,\n                  storyFn: function storyFn() {\n                    return unboundStoryFn(renderStoryContext);\n                  },\n                  unboundStoryFn: unboundStoryFn\n                });\n                _context9.next = 15;\n                return this.runPhase(abortSignal, 'rendering', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {\n                  return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          return _context6.abrupt(\"return\", _this2.renderToScreen(_renderContext, _this2.canvasElement));\n\n                        case 1:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                })));\n\n              case 15:\n                this.notYetRendered = false;\n\n                if (!abortSignal.aborted) {\n                  _context9.next = 18;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 18:\n                if (!(forceRemount && playFunction)) {\n                  _context9.next = 27;\n                  break;\n                }\n\n                this.disableKeyListeners = true;\n                _context9.next = 22;\n                return this.runPhase(abortSignal, 'playing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {\n                  return regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          return _context7.abrupt(\"return\", playFunction(_renderContext.storyContext));\n\n                        case 1:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7);\n                })));\n\n              case 22:\n                _context9.next = 24;\n                return this.runPhase(abortSignal, 'played');\n\n              case 24:\n                this.disableKeyListeners = false;\n\n                if (!abortSignal.aborted) {\n                  _context9.next = 27;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 27:\n                _context9.next = 29;\n                return this.runPhase(abortSignal, 'completed', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {\n                  return regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          return _context8.abrupt(\"return\", _this2.channel.emit(STORY_RENDERED, id));\n\n                        case 1:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                })));\n\n              case 29:\n                _context9.next = 34;\n                break;\n\n              case 31:\n                _context9.prev = 31;\n                _context9.t0 = _context9[\"catch\"](6);\n                this.callbacks.showException(_context9.t0);\n\n              case 34:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[6, 31]]);\n      }));\n\n      function render() {\n        return _render.apply(this, arguments);\n      }\n\n      return render;\n    }()\n  }, {\n    key: \"rerender\",\n    value: function () {\n      var _rerender = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10() {\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                return _context10.abrupt(\"return\", this.render());\n\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function rerender() {\n        return _rerender.apply(this, arguments);\n      }\n\n      return rerender;\n    }()\n  }, {\n    key: \"remount\",\n    value: function () {\n      var _remount = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11() {\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                return _context11.abrupt(\"return\", this.render({\n                  forceRemount: true\n                }));\n\n              case 1:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function remount() {\n        return _remount.apply(this, arguments);\n      }\n\n      return remount;\n    }() // If the story is torn down (either a new story is rendered or the docs page removes it)\n    // we need to consider the fact that the initial render may not be finished\n    // (possibly the loaders or the play function are still running). We use the controller\n    // as a method to abort them, ASAP, but this is not foolproof as we cannot control what\n    // happens inside the user's code.\n\n  }, {\n    key: \"cancelRender\",\n    value: function cancelRender() {\n      this.abortController.abort();\n    }\n  }, {\n    key: \"teardown\",\n    value: function () {\n      var _teardown = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12() {\n        var options,\n            i,\n            _args12 = arguments;\n        return regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                options = _args12.length > 0 && _args12[0] !== undefined ? _args12[0] : {};\n                this.cancelRender(); // If the story has loaded, we need to cleanup\n\n                if (this.story) this.store.cleanupStory(this.story); // Check if we're done rendering/playing. If not, we may have to reload the page.\n                // Wait several ticks that may be needed to handle the abort, then try again.\n                // Note that there's a max of 5 nested timeouts before they're no longer \"instant\".\n\n                i = 0;\n\n              case 4:\n                if (!(i < 3)) {\n                  _context12.next = 12;\n                  break;\n                }\n\n                if (this.isPending()) {\n                  _context12.next = 7;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\");\n\n              case 7:\n                _context12.next = 9;\n                return new Promise(function (resolve) {\n                  return setTimeout(resolve, 0);\n                });\n\n              case 9:\n                i += 1;\n                _context12.next = 4;\n                break;\n\n              case 12:\n                // If we still haven't completed, reload the page (iframe) to ensure we have a clean slate\n                // for the next render. Since the reload can take a brief moment to happen, we want to stop\n                // further rendering by awaiting a never-resolving promise (which is destroyed on reload).\n                global.window.location.reload();\n                _context12.next = 15;\n                return new Promise(function () {});\n\n              case 15:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function teardown() {\n        return _teardown.apply(this, arguments);\n      }\n\n      return teardown;\n    }()\n  }]);\n\n  return StoryRender;\n}();\nStoryRender.displayName = \"StoryRender\";"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}